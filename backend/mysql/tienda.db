create database tienda;


create TABLE vendedor 
(
id_vendedor int auto_increment primary key,
nombre varchar(50) not null,
apellido varchar(50) not null,
email varchar(250) not NULL unique,
telefono varchar(10) not null unique,
direccion varchar(255),
tipo_identificacion enum('C','P', 'R') COMMENT 'C=CEDULA, P=PASAPORTE, R=RUC' DEFAULT 'C',
identificacion varchar(10) not null unique,
usuario varchar(50) UNIQUE not null,
clave varchar(255) unique not null,
estado enum('A','I') COMMENT 'A=ACTIVO, I=INACTIVO' DEFAULT 'A',
fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP() COMMENT 'FECHA DE CREACION DEL VENDEDOR',
fecha_modificacion datetime DEFAULT CURRENT_TIMESTAMP() on UPDATE CURRENT_TIMESTAMP()
);


CREATE TABLE cliente 
(
id_cliente int auto_increment primary key,
nombre varchar(50) not null,
apellido varchar(50) not null,
email varchar(255) not null unique,
telefono varchar(10) not null unique,
direccion varchar(255),
tipo_identificacion enum('C', 'P', 'R') DEFAULT 'C',
identificacion varchar(10) unique not NULL,
estado enum('A', 'I') DEFAULT 'A',
fecha_creacion DATETIME default CURRENT_TIMESTAMP(),
fecha_modificacion DATETIME DEFAULT CURRENT_TIMESTAMP() on UPDATE CURRENT_TIMESTAMP()
);

create table zona
(
id_zona int auto_increment primary key,
nombre_zona varchar(255),
descripcion varchar(255),
referencia varchar(255),
fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP(),
fecha_modificacion DATETIME DEFAULT CURRENT_TIMESTAMP() on UPDATE CURRENT_TIMESTAMP()
);

CREATE table producto
(
id_producto int auto_increment primary key,
nombre varchar(100) not null,
descripcion varchar(255) not null,
precio DECIMAL(10,2) not null,
stock int not null,
categoria enum('E', 'A', 'L', 'T') COMMENT 'E=ELECTRONICO, A=ALIMENTO, L=LIMPIEZA T=TECNOLOGIA',
fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP(),
fecha_modificacion DATETIME DEFAULT CURRENT_TIMESTAMP() on UPDATE CURRENT_TIMESTAMP()
);

CREATE TABLE venta
(
id_venta int auto_increment PRIMARY key,
id_cliente int,
id_vendedor int not null,
id_zona INT,
fecha DATETIME DEFAULT CURRENT_TIMESTAMP(),
monto_total decimal(10,2),
fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP(),
fecha_modificacion DATETIME DEFAULT CURRENT_TIMESTAMP() on UPDATE CURRENT_TIMESTAMP()
);

create table detalles_venta
(
id_detalle_venta int auto_increment PRIMARY key,
id_venta int not NULL,
id_producto int not null,
cantidad int not null,
precio_unitario DECIMAL(10,2),
subtotal DECIMAL(10,2),
fecha_creacion DATETIME DEFAULT CURRENT_TIMESTAMP(),
fecha_modificacion DATETIME DEFAULT CURRENT_TIMESTAMP() on UPDATE CURRENT_TIMESTAMP()
);

